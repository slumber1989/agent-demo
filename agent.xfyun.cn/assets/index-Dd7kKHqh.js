import{r,j as o,f,d_ as I,M as K,dL as v,x as R,d$ as y}from"./index-ChJwsExv.js";import{u as U}from"./useImageCropUpload-CM0udQSZ.js";const z="_upload_bot_cropper_image_1zclg_1",E="_box_1zclg_5",S="_noBorder_1zclg_18",w="_up_btn_1zclg_25",J="_up_icon_1zclg_34",N="_fake_box_1zclg_38",e={upload_bot_cropper_image:z,box:E,noBorder:S,up_btn:w,up_icon:J,fake_box:N},M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAG2SURBVGiB7ZexSgMxHMa/v3To4OjgIBTEsYIPUHBw8AU61E3QF1B8AB/A1bmrQh0dujt0dKi4WnAQdChOQg8+B69q4/WS9BKTQn7LkVyT//ejCZcAniG5R/KU5KbvWs4hecIf3kluhc5kDMk2yYyzPJJcD51NSx5+wmLiltCEj1vCMHycEpbh45KYE35C8kHpG0UnURK+TbKr9B+T7EUjURY+f68KHJKsRSGhCz9PIO8PK2ESvkwgqIRpeJ2AgcSGj/CdgmKF4U0ENBKvJv/EiqXDvtLOAByISM9ynm9EJAPQAXCjvFoDsKMbbyswUtqVwk8pkXjWja1Z1rrInw0Aty7CTxGRLF9iw1/zD13NvxAme6AqtksoOpJAaJJAaJJAaJJAaGaOEiRXAZzBw1HBBUq+vohcqT84Vz79zYoFnR4livKpS6ihtCsJeOBPPt0eqPtK4oj60m9i3wKZ0n5yXcC3wCW+LigfAK4B3LkuYHsjs0JE7gFs+6yR9kBokkBokkBokkBodB+yI5K7/5LEjJbaoRNoFQ2KiWVfQmNVoB8kxmK8ARiI2ptfI5uI+zIzBjAQkZdPXCNsHxX7hMwAAAAASUVORK5CYII=",O=({name:P,botDesc:F,setCoverUrl:p,coverUrl:s,uploadIcon:t=M})=>{const[A,n]=r.useState(!1),[a,L]=r.useState(!1),{inputRef:d,triggerFileSelectPopup:g,onFileChange:m,visible:_,closeModal:l,crop:u,setCrop:x,zoom:C,setZoom:b,onCropComplete:B,uploadedSrc:i,formData:c,isFormReady:h}=U({logPerf:!0}),j=()=>{l()};return o.jsxs("div",{className:e.upload_bot_cropper_image,children:[o.jsx("input",{type:"file",accept:"image/*",ref:d,onChange:m,style:{display:"none"}}),o.jsxs("div",{className:f(e.box,{[e.noBorder]:s}),onClick:a?()=>null:g,children:[a&&o.jsx(I,{color:"#425CFF",size:14}),!a&&(s?o.jsx("img",{src:s,onMouseEnter:()=>n(!0),alt:""}):o.jsx("div",{className:e.up_btn,children:o.jsx("img",{className:e.up_icon,src:t,alt:""})})),A&&o.jsx("div",{className:e.fake_box,onMouseLeave:()=>n(!1),children:o.jsx("div",{className:e.up_btn,children:o.jsx("img",{className:e.up_icon,src:t,alt:""})})})]}),o.jsx(K,{open:_,centered:!0,onCancel:j,closable:!1,bodyStyle:{height:"600px"},width:600,maskClosable:!1,okButtonProps:{disabled:!h},onOk:()=>{if(!c){R.info("图片处理未完成，请稍候...");return}y(c).then(k=>{p(k),l()})},children:i&&o.jsx("div",{style:{height:"500px",overflow:"hidden",position:"relative"},children:o.jsx(v,{image:i,crop:u,zoom:C,aspect:1,onCropChange:x,onCropComplete:B,onZoomChange:b})})})]})};export{O as I,M as d};
