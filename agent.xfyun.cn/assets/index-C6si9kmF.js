import{d as W,c as F,r as l,G as S,q as U,j as e,M as I,S as D,T as H,dj as K,x as A,I as q,D as E,g as N,b2 as Z,dk as $,dl as X,dm as Y,dn as ee,cq as te,dp as ae,dq as ne,au as se,f as M,dr as oe}from"./index-ChJwsExv.js";import{M as ie}from"./index-C8P53uUi.js";import{V as le}from"./index-sQMLBTCe.js";const J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAJRSURBVDiNrZJNSFRhFIaf786duXdGCxTblKGBiGIU6c4mFEwdMxBhGH9IFJIgIgwkIVqGBIqCbTOaoJga3JRNtlCm0NxZ5MpN6SJpoZuwdObO3O+0kJHE3ETv6nBeOJznPQf+pyq7paSmS4oO82u6pKiyW0r+7Bm5oqpHpi3Fmils1EVkvrldQjmvuV1CdRGZN4UNS7FW1SPTOU8BVHRKqe1h1RJavVmcgEu/pemwNO8UkDKoTxu82PYwmTHxpRUJDSeXn6lvJkCe4qfpglfjLMTVLDDbe0kWtWLCFAjAwJM36gFAfUQuYkBWkdpDWIqpTb9mIeDSDzDUIOHCDGNHXKJ+TbQww9hQg4QBfC79tmZhKaY2Acwci5Vh2AczN5tk0e8wZsBo7y2iW0BinO+WS2ygSY5/1XQoTcu+DHIKt0mywKG+dJvotevcTzxk+f0xaO7nzOo97hiavpWjzD5OqMYDVwAIboISWLcPnvCbDYZA7eb+/t4G8WoJpQ1mvuQx8MPHmKUZ7bxBdMuCxDh9aYPbBQ6Dp34xYWlaIh/V230DXp2V+ZTBeuST6hxqkLDfJWa7PAVIebiy46FrZE5Nxc/Jc0tzou2zurCHkCyXIp8mGIBJgJE5NVXgMGhr+vKz9BU4DI7MqSmAAExammCyfPdjTQDbIB8XDPC9PC2NGS9Xdxw6djzMKsB2mYhXS62leeTL4vW6gMbeh/ChQl47Bq1pDzgGCykPwznOeLWELJe7liZo7z5c4vyKunwg6WSZFOdW+5uS5VKULJPiw/x/0m/mwuXbLiEgLwAAAABJRU5ErkJggg==",re="_open_source_modal_1kqvj_5",ce="_modal_content_1kqvj_5",de="_inputBottom_1kqvj_11",me="_aiBottom_1kqvj_20",ue="_clearBottom_1kqvj_40",_e="_tuijianBox_1kqvj_47",ge="_tuijianTitle_1kqvj_51",pe="_tuijianButton_1kqvj_57",fe="_title_1kqvj_76",he="_footerContiner_1kqvj_141",xe="_cancelBtn_1kqvj_148",Ae="_submitBtn_1kqvj_161",we="_form_area_1kqvj_181",ke="_input_area_1kqvj_193",c={open_source_modal:re,modal_content:ce,inputBottom:de,aiBottom:me,clearBottom:ue,tuijianBox:_e,tuijianTitle:ge,tuijianButton:pe,title:fe,footerContiner:he,cancelBtn:xe,submitBtn:Ae,form_area:we,input_area:ke},Ce=({visible:C,onCancel:k})=>{const{t}=W(),v=F(),[s,h]=l.useState(!1),[m]=S.useForm(),[j,B]=l.useState([]),b=a=>{IFlyCollector==null||IFlyCollector.onEvent("create_agents_rightnow",{uid:`${N("account_id")}`},"new25_agent_center"),h(!0),Z(a.preset_detail).then(async n=>{await sessionStorage.setItem("botTemplateInfoValue",JSON.stringify(n)),h(!1),v("/space/config/base?create=true&quickCreate=trueis&sentence=1"),k()},n=>{A.error((n==null?void 0:n.msg)||t("createAgent1.createAgentFailed")),h(!1)})},w=()=>{if(!m.getFieldsValue().preset_detail){A.warning(t("createAgent1.settingCannotBeEmpty"));return}h(!0),$({name:m.getFieldsValue().preset_detail}).then(a=>{typeof a=="string"?m.setFieldsValue({preset_detail:a}):m.setFieldsValue({preset_detail:JSON.stringify(a)}),h(!1)}).catch(a=>{h(!1),A.error((a==null?void 0:a.msg)||t("createAgent1.aiGeneratedFailed"))})},x=a=>{if(a.length<=3)return a.slice().sort(()=>Math.random()-.5);const n=[...a];for(let i=0;i<3;i++){const u=Math.floor(Math.random()*(n.length-i))+i;[n[i],n[u]]=[n[u],n[i]]}return n.slice(0,3)};return l.useEffect(()=>{U({searchValue:"",botType:"",official:1,pageIndex:1,pageSize:16}).then(a=>{B(x(a.pageList))})},[]),e.jsx(I,{wrapClassName:c.open_source_modal,width:640,open:C,centered:!0,onCancel:k,destroyOnClose:!0,maskClosable:!1,footer:null,children:e.jsx(D,{spinning:s,tip:t("createAgent1.generating"),children:e.jsxs("div",{className:c.modal_content,children:[e.jsx("div",{className:c.title,children:t("createAgent1.oneSentenceCreateAgent")}),e.jsxs(S,{form:m,preserve:!1,onFinish:b,labelCol:{span:4,offset:0},style:{position:"relative"},children:[e.jsxs("div",{className:c.tuijianBox,children:[e.jsxs("div",{className:c.tuijianTitle,children:[t("createAgent1.inspirationRecommend"),"："]}),j.map(a=>{var n,i;return e.jsx("div",{className:c.tuijianButton,onClick:()=>{var u;K((u=a.bot)==null?void 0:u.botId).then(async _=>{if(!_)return A.warning(t("createAgent1.templateDataEmpty"));await sessionStorage.setItem("botTemplateInfoValue",JSON.stringify(_)),v("/space/config/base?create=true&quickCreate=true")})},children:e.jsx(H,{title:(n=a.bot)==null?void 0:n.botName,placement:"top",children:(i=a.bot)==null?void 0:i.botName})})})]}),e.jsx(S.Item,{name:"preset_detail",label:t("createAgent1.setting"),labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0,message:t("createAgent1.settingDescriptionCannotBeEmpty")},{whitespace:!0,message:t("createAgent1.settingDescriptionCannotBeEmpty")}],validateTrigger:"onBlur",className:c.form_area,children:e.jsx(q.TextArea,{showCount:!0,maxLength:520,name:"preset_detail",className:c.input_area,autoSize:{minRows:5,maxRows:5},placeholder:t("createAgent1.pleaseEnterContent")})}),e.jsxs("div",{className:c.inputBottom,children:[e.jsx("div",{style:{background:"#F2F5FE",borderRadius:"16px",marginBottom:"5px",marginLeft:"10px"},children:e.jsxs("div",{className:c.aiBottom,onClick:()=>{w()},children:[e.jsx("img",{src:J,alt:""}),e.jsx("span",{children:t("createAgent1.aiGenerated")})]})}),e.jsx("div",{className:c.clearBottom,onClick:()=>{m.resetFields()},children:t("createAgent1.clear")})]}),e.jsxs("div",{className:c.footerContiner,children:[e.jsx("div",{className:c.cancelBtn,onClick:()=>{v("/space/config/base?create=true")},children:t("createAgent1.skip")}),e.jsx(E,{className:c.submitBtn,htmlType:"submit",children:t("createAgent1.createAgent")})]})]})]})})})},ve="_word_create_modal_11kl7_1",je="_modal_content_11kl7_4",Be="_title_11kl7_10",be="_recommendBox_11kl7_19",Ne="_recommendTitle_11kl7_25",Se="_recommendButton_11kl7_31",ye="_inputBottom_11kl7_49",Ie="_aiBottomBox_11kl7_58",We="_aiBottom_11kl7_58",Fe="_clearBottom_11kl7_83",Te="_footerContainer_11kl7_103",Ve="_submitBtn_11kl7_109",Me="_form_area_11kl7_154",De="_input_area_11kl7_170",d={word_create_modal:ve,modal_content:je,title:Be,recommendBox:be,recommendTitle:Ne,recommendButton:Se,inputBottom:ye,aiBottomBox:Ie,aiBottom:We,clearBottom:Fe,footerContainer:Te,submitBtn:Ve,form_area:Me,input_area:De},qe=({externalVisible:C,onExternalClose:k})=>{const{t}=W(),v=F(),[s]=S.useForm(),[h,m]=l.useState(!1),[j,B]=l.useState([]),[b,w]=l.useState(!1),[x,a]=l.useState(!1),[n,i]=l.useState(!1),u=l.useRef(!0),_=C!==void 0?C:h,{startPolling:g}=X({enabled:!1,origin:"word-create-workflow.tsx",showMessages:!0}),z=()=>{x?i(!0):(u.current=!1,k?k():m(!1),s.resetFields(),a(!1),w(!1))},O=()=>{i(!1),u.current=!1,k?k():m(!1),s.resetFields(),a(!1),w(!1),g()},G=o=>{s.setFieldsValue({description:o})},L=async()=>{const o=s.getFieldValue("description");if(!o||!o.trim()){s.setFields([{name:"description",errors:[t("createAgent1.settingDescriptionLimit")]}]);return}if(o.length<5||o.length>200){s.setFields([{name:"description",errors:[t("createAgent1.settingDescriptionLimit")]}]);return}w(!0);try{const p=await $({name:o});typeof p=="string"?s.setFieldsValue({description:p}):s.setFieldsValue({description:JSON.stringify(p)}),A.success(t("createAgent1.aiGenerateSuccess"))}catch(p){A.error((p==null?void 0:p.msg)||t("createAgent1.aiGeneratedFailed"))}finally{w(!1)}},R=async o=>{var T;const p=s.getFieldValue("description");if(p.length<5||p.length>200){s.setFields([{name:"description",errors:[t("createAgent1.settingDescriptionLimit")]}]);return}a(!0);try{const f=await ee({text:o.description.trim()});s.resetFields();const V=te(f==null?void 0:f.ext)?(T=JSON.parse(f==null?void 0:f.ext))==null?void 0:T.botId:null,Q=f==null?void 0:f.id;if(u.current){A.success(t("createAgent1.workflowAgentCreateSuccess")),V&&v(`/work_flow/${Q}/arrange?botId=${V}`);try{const y=await ae();y!=null&&y.id&&await ne({id:y.id})}catch{}}}catch(f){u.current&&A.error((f==null?void 0:f.msg)||t("createAgent1.createFailed"))}finally{w(!1),a(!1)}},P=async()=>{Y().then(o=>{B(o)}).catch(o=>{B([]),A.error((o==null?void 0:o.msg)||t("createAgent1.templateDataEmpty"))})};return l.useEffect(()=>{_&&P()},[_]),l.useEffect(()=>()=>{u.current=!1},[]),e.jsxs(e.Fragment,{children:[e.jsx(I,{wrapClassName:d.word_create_modal,width:640,open:_,centered:!0,onCancel:z,maskClosable:!1,footer:null,destroyOnClose:!0,children:e.jsx(D,{spinning:b,tip:t(x?"createAgent1.creatingInProgress":"createAgent1.generating"),children:e.jsxs("div",{className:d.modal_content,children:[e.jsx("div",{className:d.title,children:t("createAgent1.oneWordCreateWorkflow")}),e.jsxs("div",{className:d.recommendBox,children:[e.jsxs("div",{className:d.recommendTitle,children:[t("createAgent1.inspirationRecommend"),"："]}),j.map((o,p)=>e.jsx("div",{className:d.recommendButton,onClick:()=>G(o),title:o,children:t(p===0?"createAgent1.multiLanguageTranslation":"createAgent1.imageRecognition")},p))]}),e.jsxs(S,{form:s,preserve:!1,onFinish:R,labelCol:{span:24},style:{position:"relative"},children:[e.jsx(S.Item,{name:"description",label:t("createAgent1.description"),labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0,message:t("createAgent1.settingDescriptionLimit")},{whitespace:!0,message:t("createAgent1.settingDescriptionLimit")}],validateTrigger:"onBlur",className:d.form_area,children:e.jsx(q.TextArea,{showCount:!0,maxLength:200,name:"description",className:d.input_area,autoSize:{minRows:5,maxRows:5},placeholder:t("createAgent1.pleaseEnterWorkflowDescription"),disabled:x})}),e.jsxs("div",{className:d.inputBottom,children:[e.jsx("div",{className:d.aiBottomBox,children:e.jsxs("div",{className:d.aiBottom,onClick:L,children:[e.jsx("img",{src:J,alt:""}),e.jsx("span",{children:t("createAgent1.aiGenerated")})]})}),e.jsx("div",{className:d.clearBottom,onClick:()=>{s.resetFields()},children:t("createAgent1.clear")})]}),e.jsx("div",{className:d.footerContainer,children:e.jsx(E,{className:d.submitBtn,htmlType:"submit",loading:x,children:t(x?"createAgent1.complexWorkflowTip":"createAgent1.createNow")})})]})]})})}),e.jsx(I,{title:t("createAgent1.confirmClose"),open:n,onOk:O,onCancel:()=>i(!1),okText:t("createAgent1.confirm"),cancelText:t("createAgent1.cancel"),centered:!0,children:e.jsx("p",{children:t("createAgent1.closeConfirmMessage")})})]})},Ee="_open_source_modal_1vuuz_2",$e="_modal_content_1vuuz_32",Je="_title_1vuuz_38",ze="_intelligentAgents_1vuuz_62",Oe="_cueWord_1vuuz_69",Ge="_Workflow_img_1vuuz_105",Le="_cueWord_img_1vuuz_108",Re="_Workflow_1vuuz_105",Pe="_virtual_1vuuz_199",Qe="_virtual_img_1vuuz_216",Ue="_selected_1vuuz_245",r={open_source_modal:Ee,modal_content:$e,title:Je,intelligentAgents:ze,cueWord:Oe,Workflow_img:Ge,cueWord_img:Le,Workflow:Re,virtual:Pe,virtual_img:Qe,selected:Ue},Xe=({visible:C,onCancel:k})=>{const{t}=W();se();const v=F(),[s,h]=l.useState(!1),[m,j]=l.useState(""),[B,b]=l.useState(!1),[w,x]=l.useState(!1),[a,n]=l.useState(!1),i=_=>{j(_),_==="cueWord"?(IFlyCollector==null||IFlyCollector.onEvent("create_new_agents_method",{uid:`${N("account_id")}`,type:"提示词智能体"},"new25_agent_center"),b(!0)):_==="workflow"?(IFlyCollector==null||IFlyCollector.onEvent("create_new_agents_method",{uid:`${N("account_id")}`,type:"工作流智能体"},"new25_agent_center"),h(!0)):_==="virtual"&&x(!0)},u=()=>{IFlyCollector==null||IFlyCollector.onEvent("cancel_create_new_agents",{uid:`${N("account_id")}`},"new25_agent_center"),j(""),k()};return l.useEffect(()=>{C&&(IFlyCollector==null||IFlyCollector.onEvent("create_new_agents_show",{uid:`${N("account_id")}`},"new25_agent_center"))},[C]),e.jsxs(I,{wrapClassName:r.open_source_modal,open:C,centered:!0,onCancel:u,destroyOnClose:!0,width:"auto",maskClosable:!1,footer:null,children:[e.jsxs("div",{className:r.modal_content,children:[e.jsx("div",{className:r.title,children:e.jsx("span",{children:t("createAgent1.create")})}),e.jsxs("div",{className:r.intelligentAgents,children:[e.jsxs("div",{className:`${r.cueWord} ${m==="cueWord"?r.selected:""}`,onClick:()=>i("cueWord"),children:[e.jsx("div",{className:r.cueWord_img}),e.jsx("p",{children:t("createAgent1.promptCreation")}),e.jsx("span",{children:t("createAgent1.promptSetup")})]}),e.jsxs("div",{className:`${r.Workflow} ${m==="workflow"?r.selected:""}`,onClick:()=>i("workflow"),children:[e.jsx("div",{className:M(r.cueWord_img,r.Workflow_img)}),e.jsx("p",{children:t("createAgent1.workflowCreation")}),e.jsx("span",{children:t("createAgent1.workflowDesign")})]}),e.jsxs("div",{className:`${r.virtual} ${m==="virtual"?r.selected:""}`,onClick:()=>i("virtual"),children:[e.jsx("div",{className:M(r.cueWord_img,r.virtual_img)}),e.jsx("p",{children:t("createAgent1.virtualCreation")}),e.jsx("span",{children:t("createAgent1.virtualCreationDesc")})]})]})]}),s&&e.jsx(ie,{visible:s,onCancel:()=>{h(!1)},onWordCreateModalOpen:()=>{IFlyCollector==null||IFlyCollector.onEvent("one_sentence_create_workflow",{uid:`${N("account_id")}`},"new25_agent_center"),n(!0),h(!1)}}),a&&e.jsx(qe,{externalVisible:a,onExternalClose:()=>{n(!1)}}),e.jsx(Ce,{visible:B,onCancel:()=>{b(!1)}}),w&&e.jsx(le,{visible:w,onSubmit:_=>{oe(_).then(g=>{A.success(t("createAgent1.createSuccess")),v(`/work_flow/${g==null?void 0:g.flowId}/arrange?botId=${g==null?void 0:g.botId}`),x(!1)}).catch(g=>{A.error((g==null?void 0:g.msg)||g)})},onCancel:()=>{x(!1)}})]})};export{Xe as H};
