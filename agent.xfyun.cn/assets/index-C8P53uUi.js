import{c as R,r as l,j as e,dD as V,F as m,dE as X,D as $,cn as e0,x as N,dF as t0,d as a0,b7 as n0,M as s0,S as o0,T as A,ct as l0,cs as P,g as I,dG as r0,dH as c0,dI as i0,dJ as p0}from"./index-ChJwsExv.js";import{c as _0}from"./modal-close-QVlieQPY.js";import{u as d0}from"./icon_zhishi_upload_act-D7BMkVq5.js";import{U as g0}from"./index-DOFwIa6F.js";import{g as E}from"./globalStore-__M3ATz8.js";import{U as m0}from"./uuid-Q0OBPXtL.js";const{Dragger:x0}=g0;function f0({setWorkflowImportModalVisible:w}){const k=R(),[c,r]=l.useState([]),[M,h]=l.useState(!1);function L(a){var d,u,j;return a.size>20971520?(N.error(m.t("workflow.promptDebugger.uploadFileSizeExceeded")),!1):["yml","yaml"].includes((j=(u=(d=a==null?void 0:a.name)==null?void 0:d.split("."))==null?void 0:u.pop())==null?void 0:j.toLowerCase())?!0:(N.error(m.t("workflow.promptDebugger.pleaseUploadYmlYamlFormat")),!1)}const F=a=>{if(a===0)return"0 B";const p=1024,f=["B","KB","MB","GB","TB"],d=Math.floor(Math.log(a)/Math.log(p));return parseFloat((a/Math.pow(p,d)).toFixed(2))+" "+f[d]},i={name:"file",action:"/xingchen-api/image/upload",showUploadList:!1,accept:".yml,.yaml",beforeUpload:L,customRequest:a=>{const p=a.file,f=e0();r(d=>{var T,v,y;const u=(y=(v=(T=p.name)==null?void 0:T.split("."))==null?void 0:v.pop())==null?void 0:y.toLowerCase();return[{id:f,name:p.name,type:u,progress:0,status:"loading",loaded:0,total:F(p.size),file:p}]})}},x=()=>{h(!0),t0({file:c[0].file}).then(a=>{w(!1),k(`/work_flow/${a.flowId}/arrange`)}).finally(()=>{h(!1)})};return e.jsx(e.Fragment,{children:V.createPortal(e.jsx("div",{className:"mask",style:{zIndex:1201},children:e.jsxs("div",{className:"modal-container w-[480px]",children:[e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{className:"text-base font-semibold",children:m.t("workflow.promptDebugger.importWorkflow")}),e.jsx("img",{src:_0,className:"w-3 h-3 cursor-pointer",alt:"",onClick:()=>w(!1)})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(x0,{...i,className:"icon-upload",children:[e.jsx("img",{src:d0,className:"w-8 h-8",alt:""}),e.jsxs("div",{className:"font-medium mt-6",children:[m.t("workflow.promptDebugger.dragFileHereOr"),e.jsx("span",{className:"text-[#6356EA]",children:m.t("workflow.promptDebugger.selectFile")})]}),e.jsx("p",{className:"text-desc mt-2",children:m.t("workflow.promptDebugger.fileFormatYmlYaml")})]})}),(c==null?void 0:c.length)>0&&e.jsx("div",{className:"mt-3",children:c==null?void 0:c.map(a=>e.jsx("div",{className:"bg-[#F6F6F6] rounded-lg px-[5px] py-0.5 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-[22px] overflow-hidden",children:[e.jsx("div",{className:"w-[32px] h-[32px] bg-[#fff] rounded-lg flex items-center justify-center",style:{boxShadow:"0px 2px 4px 0px rgba(46,51,68,0.04)"},children:e.jsx("img",{src:X.get(a==null?void 0:a.type),className:"w-[18px] h-[18px]",alt:""})}),e.jsx("div",{className:"flex-1 text-overflow",title:a==null?void 0:a.name,children:a==null?void 0:a.name}),e.jsx("div",{children:a==null?void 0:a.total})]})},a==null?void 0:a.id))}),e.jsxs("div",{className:"flex justify-end gap-4 mt-10",children:[e.jsx($,{type:"text",className:"origin-btn px-[24px]",onClick:()=>w(!1),children:m.t("workflow.promptDebugger.cancel")}),e.jsx($,{loading:M,type:"primary",disabled:c.length===0,className:"px-[24px]",onClick:x,children:m.t("common.save")})]})]})}),document.body)})}const u0="/assets/ai_kefu-BMScs-Ng.png",h0="/assets/workflow-import-icon-1-uQJyjc.svg",w0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='40'%20height='18'%20viewBox='0%200%2040%2018'%3e%3cdefs%3e%3cclipPath%20id='master_svg0_275_47483'%3e%3cpath%20d='M0%200C0%200%200%200%200%200L31%200C35.97056274847714%200%2040%204.02943725152286%2040%209L40%2018C40%2018%2040%2018%2040%2018L9%2018C4.02943725152286%2018%209.81054792658386e-16%2013.970562748477143%200%209.000000000000002Z'/%3e%3cpath%20d='M23.999998,0L0,0L0,1.9999981C0,10.836555,7.1634445,18,16.000004,18L40,18L40,16.000004C40,7.1634445,32.836555,0,23.999998,0ZM39,17L39,16.000004Q39,9.7867985,34.606602,5.3933992Q30.213202,1,23.999998,1L1,1L1,1.9999975Q1.0000004,8.2132034,5.3933992,12.606602Q9.7867975,17,16.000004,17L39,17Z'%20fill-rule='evenodd'/%3e%3c/clipPath%3e%3c/defs%3e%3cg%20clip-path='url(%23master_svg0_275_47483)'%3e%3cpath%20d='M0%200C0%200%200%200%200%200L31%200C35.97056274847714%200%2040%204.02943725152286%2040%209L40%2018C40%2018%2040%2018%2040%2018L9%2018C4.02943725152286%2018%209.81054792658386e-16%2013.970562748477143%200%209.000000000000002Z'%20fill='%23E8E3FF'%20fill-opacity='1'/%3e%3cg%3e%3cpath%20d='M15.2300005,12.6000004L15.2300005,5.4000001L13.9600005,5.4000001L13.970000299999999,10.29L11.0200005,5.4000001L9.7100005,5.4000001L9.7100005,12.6000004L10.9800005,12.6000004L10.9800005,7.5599999L14.010000699999999,12.6000004L15.2300005,12.6000004ZM21.4,12.6000004L21.4,11.4000001L18.2,11.4000001L18.2,9.5600004L21.059998999999998,9.5600004L21.059998999999998,8.3899999L18.2,8.3899999L18.2,6.5900002L21.32,6.5900002L21.32,5.4000001L16.9300003,5.4000001L16.9300003,12.6000004L21.4,12.6000004ZM31.049999,5.4000001L29.67,5.4000001L28.559999,10.5999999L27.289999,5.4000001L25.939999,5.4000001L24.6,10.6300001L23.469999,5.4000001L21.990000000000002,5.4000001L23.74,12.6000004L25.32,12.6000004L26.57,7.4900002L27.77,12.6000004L29.289999,12.6000004L31.049999,5.4000001Z'%20fill='%236356EA'%20fill-opacity='1'/%3e%3c/g%3e%3cpath%20d='M23.999998,0L0,0L0,1.9999981C0,10.836555,7.1634445,18,16.000004,18L40,18L40,16.000004C40,7.1634445,32.836555,0,23.999998,0ZM39,17L39,16.000004Q39,9.7867985,34.606602,5.3933992Q30.213202,1,23.999998,1L1,1L1,1.9999975Q1.0000004,8.2132034,5.3933992,12.606602Q9.7867975,17,16.000004,17L39,17Z'%20fill-rule='evenodd'%20fill-opacity='0'%20stroke-opacity='1'%20stroke='%23D1CCFF'%20fill='none'%20stroke-width='1'/%3e%3c/g%3e%3c/svg%3e",L0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='40'%20height='18'%20viewBox='0%200%2040%2018'%3e%3cdefs%3e%3cclipPath%20id='master_svg0_275_47456'%3e%3cpath%20d='M0%200C0%200%200%200%200%200L31%200C35.97056274847714%200%2040%204.02943725152286%2040%209L40%2018C40%2018%2040%2018%2040%2018L9%2018C4.02943725152286%2018%209.81054792658386e-16%2013.970562748477143%200%209.000000000000002Z'/%3e%3cpath%20d='M23.999998,0L0,0L0,1.9999981C0,10.836555,7.1634445,18,16.000004,18L40,18L40,16.000004C40,7.1634445,32.836555,0,23.999998,0ZM39,17L39,16.000004Q39,9.7867985,34.606602,5.3933992Q30.213202,1,23.999998,1L1,1L1,1.9999975Q1.0000004,8.2132034,5.3933992,12.606602Q9.7867975,17,16.000004,17L39,17Z'%20fill-rule='evenodd'/%3e%3c/clipPath%3e%3c/defs%3e%3cg%20clip-path='url(%23master_svg0_275_47456)'%3e%3cpath%20d='M0%200C0%200%200%200%200%200L31%200C35.97056274847714%200%2040%204.02943725152286%2040%209L40%2018C40%2018%2040%2018%2040%2018L9%2018C4.02943725152286%2018%209.81054792658386e-16%2013.970562748477143%200%209.000000000000002Z'%20fill='%23FFEFE6'%20fill-opacity='1'/%3e%3cg%3e%3cpath%20d='M16.71,12.6000004L16.71,5.4000001L15.43,5.4000001L15.43,8.3400002L12.34,8.3400002L12.34,5.4000001L11.070001,5.4000001L11.070001,12.6000004L12.34,12.6000004L12.34,9.5799999L15.43,9.5799999L15.43,12.6000004L16.71,12.6000004ZM20.859999,12.7200003C22.49,12.7200003,23.449999,11.8600001,23.57,10.52C23.65,9.6599998,23.639999,8.5799999,23.599998,7.7600002C23.529999,6.1600003,22.419998,5.28000021,20.859999,5.28000021C19.299999,5.28000021,18.26,6.1700001,18.189999,7.7600002C18.15,8.5799999,18.139999,9.6599998,18.219999,10.52C18.34,11.8499999,19.42,12.7200003,20.859999,12.7200003ZM20.859999,11.52C20.18,11.52,19.65,11.220000299999999,19.549999,10.279999700000001C19.469999,9.54,19.49,8.5,19.519999,7.9300003C19.58,6.9000001,20.07,6.5,20.859999,6.4700003C21.75,6.4700003,22.199999,6.8499999,22.27,7.9300003C22.309999,8.5,22.32,9.54,22.24,10.279999700000001C22.139999,11.1500001,21.57,11.4899998,20.859999,11.52ZM29.529999,6.5799999L29.529999,5.4000001L24.43,5.4000001L24.539999,6.5799999L26.369999,6.5799999L26.369999,12.6000004L27.639999,12.6000004L27.639999,6.5799999L29.529999,6.5799999Z'%20fill='%23FA9668'%20fill-opacity='1'/%3e%3c/g%3e%3cpath%20d='M23.999998,0L0,0L0,1.9999981C0,10.836555,7.1634445,18,16.000004,18L40,18L40,16.000004C40,7.1634445,32.836555,0,23.999998,0ZM39,17L39,16.000004Q39,9.7867985,34.606602,5.3933992Q30.213202,1,23.999998,1L1,1L1,1.9999975Q1.0000004,8.2132034,5.3933992,12.606602Q9.7867975,17,16.000004,17L39,17Z'%20fill-rule='evenodd'%20fill-opacity='0'%20stroke-opacity='1'%20stroke='%23FFE0D1'%20fill='none'%20stroke-width='1'/%3e%3c/g%3e%3c/svg%3e",j0="_create_modal_uj98x_1",T0="_create_modal_wrap_uj98x_9",y0="_scroll_bar_uj98x_16",v0="_wrapper_title_uj98x_35",b0="_title_left_uj98x_40",C0="_agent_Template_Tab_uj98x_81",N0="_agent_Template_Tab_item_uj98x_94",k0="_agent_Template_Tab_item_content_uj98x_110",M0="_agent_Template_Tab_item_active_uj98x_120",F0="_wrapper_container_uj98x_124",S0="_wrapper_container_agentType_uj98x_240",A0="_wrapper_agentType_content_uj98x_240",I0="_agentType_Type_content_uj98x_247",E0="_agentType_Type_content_tag_uj98x_257",D0="_agent_img_uj98x_263",B0="_agent_bottom_uj98x_272",Z0="_my_btn_uj98x_278",Q0="_wrapper_agentType_Type_only_hover_uj98x_295",$0="_iconBox_uj98x_301",P0="_iconTitle_uj98x_309",R0="_wrapper_agentType_Type_uj98x_295",U0="_agent_center_title_uj98x_334",z0="_agent_center_title_left_uj98x_340",O0="_title_left_text1_uj98x_343",W0="_ell_uj98x_512",Y0="_word_create_workflow_uj98x_518",n={create_modal:j0,create_modal_wrap:T0,scroll_bar:y0,wrapper_title:v0,title_left:b0,agent_Template_Tab:C0,agent_Template_Tab_item:N0,agent_Template_Tab_item_content:k0,agent_Template_Tab_item_active:M0,wrapper_container:F0,wrapper_container_agentType:S0,wrapper_agentType_content:A0,agentType_Type_content:I0,agentType_Type_content_tag:E0,agent_img:D0,agent_bottom:B0,my_btn:Z0,wrapper_agentType_Type_only_hover:Q0,iconBox:$0,iconTitle:P0,wrapper_agentType_Type:R0,agent_center_title:U0,agent_center_title_left:z0,title_left_text1:O0,ell:W0,word_create_workflow:Y0},X0=({visible:w,onCancel:k,onWordCreateModalOpen:c})=>{const{t:r,i18n:M}=a0(),h=M.language==="en",L=R(),[F,U]=l.useState({pageIndex:1,pageSize:2e4}),i=E(t=>t.avatarIcon),x=E(t=>t.avatarColor),a=E(t=>t.getAvatarConfig),[p,f]=l.useState(!1),[d,u]=l.useState(-1),j=l.useRef([]),{isDefaultPersonalSpace:T}=n0(L),v=()=>{if(!(i!=null&&i.length)||!(x!=null&&x.length))return{avatar:"https://oss-beijing-m8.openstorage.cn/SparkBotProd/icon/common/emojiitem_00_10@2x.png",avatarColor:"#FFEAD5"};const t=Math.floor(Math.random()*i.length),s=Math.floor(Math.random()*x.length),{name:g,value:_}=i[t],o=x[s];return{avatar:g+_,avatarColor:o.name}},y=async(t,s)=>{f(!0);const g=()=>m0.genV4().toString().replace(/-/g,"").substring(0,6),_={name:r("createAgent1.commonCustom")+g(),botType:0,botDesc:"",botId:null,inputExample:["","",""],...v()};t?(IFlyCollector==null||IFlyCollector.onEvent("create_agent_categories",{uid:`${I("account_id")}`,type:`${s.title}`},"new25_agent_center"),_.massId=s.mass_id,_.name=s.title+g(),await i0(_).then(o=>{L(`/work_flow/${o.flowId}/arrange`)}).catch(o=>{N.error((o==null?void 0:o.msg)||"创建失败")})):(IFlyCollector==null||IFlyCollector.onEvent("create_agent_categories",{uid:`${I("account_id")}`,type:"自定义创建"},"new25_agent_center"),await p0(_).then(o=>{L(`/work_flow/${o.flowId}/arrange`)}).catch(o=>{N.error((o==null?void 0:o.msg)||"创建失败")})),f(!1)},z=3063333,[S,O]=l.useState([]),W=l.useRef([]),[Y,D]=l.useState(!1),H=l.useMemo(()=>T()?S:S.filter(t=>t.bot_id!==z),[T,S]),B=async t=>{const s={...F};t!=null&&(s.groupId=t);const g=await c0(s);O(g)},G=async()=>{const t=await r0();t.unshift({id:null,groupName:r("createAgent1.allTemplates")}),q(t)},Z=t=>{t!==b&&(Q(t),B(t))};l.useEffect(()=>{G(),B(),i!=null&&i.length||a()},[]);const[b,Q]=l.useState(null),[C,q]=l.useState([]),[J,K]=l.useState(!1);return e.jsxs("div",{className:n.create_modal,children:[Y&&e.jsx(f0,{setWorkflowImportModalVisible:D}),e.jsx(s0,{open:w,getContainer:!1,width:"auto",footer:!1,centered:!0,onCancel:k,afterClose:()=>{Q(0)},children:e.jsx(o0,{style:{maxHeight:"654px"},spinning:p,children:e.jsxs("div",{className:n.create_modal_wrap,children:[e.jsx("div",{className:n.wrapper_title,children:e.jsx("div",{className:n.title_left,children:e.jsx("span",{style:{fontWeight:600},children:r("createAgent1.workflowCreationTitle")})})}),e.jsxs("div",{className:"w-full flex items-center justify-between mb-[14px]",children:[e.jsxs("div",{className:n.agent_Template_Tab,children:[C.slice(0,h?5:8).map(t=>e.jsx("div",{className:`${n.agent_Template_Tab_item} cursor-pointer 
                    ${b==t.id?n.agent_Template_Tab_item_active:""} 
                    transition duration-75`,onClick:()=>Z(t.id),children:e.jsx(A,{title:t.groupName,placement:"top",children:e.jsx("div",{className:`${n.agent_Template_Tab_item_content}`,children:t.groupName})})},t.id)),C.length>(h?5:8)&&e.jsx(l0,{dropdownRender:()=>e.jsx("div",{className:"bg-[#F6F9FF] text-[#7F7F7F]",children:C.slice(h?5:8).map(t=>e.jsx("div",{className:`cursor-pointer font-medium text-[14px] leading-4 transition duration-75 font-[苹方-简] px-4 py-2 ${b==t.id?"text-[#6356EA] bg-[#fff]":""}`,onClick:()=>{Z(t.id)},children:e.jsx(A,{title:t.groupName,placement:"top",children:t.groupName})},t.id))}),trigger:["click"],onOpenChange:t=>{K(t)},children:e.jsx("div",{className:`
                        ${n.agent_Template_Tab_item}
                        cursor-pointer
                        transition duration-75
                        ${!J&&C.slice(8).some(t=>t.id===b)?n.agent_Template_Tab_item_active:""}
                      `,children:r("createAgent1.moreCategories")})})]}),e.jsxs("div",{className:"flex items-center gap-2 w-fit",children:[e.jsx(A,{title:r("createAgent1.oneSentenceCreateAgentTip"),placement:"top",children:e.jsxs("div",{className:n.word_create_workflow,onClick:c,children:[e.jsx(P,{}),e.jsx("span",{children:r("createAgent1.oneWordGenerate")}),e.jsx("img",{src:"https://openres.xfyun.cn/xfyundoc/2025-10-27/d05a098f-07c8-4b5b-99cb-99113525bce1/1761547599572/beta.png",alt:""})]})}),e.jsxs("div",{className:"flex items-center gap-2 w-fit cursor-pointer whitespace-nowrap",onClick:()=>{IFlyCollector==null||IFlyCollector.onEvent("import_workflow",{uid:`${I("account_id")}`},"new25_agent_center"),D(!0)},children:[e.jsx("img",{src:h0,className:"w-[14px] h-[14px]",alt:""}),e.jsx("span",{className:"text-sm text-[#6356EA]",children:r("createAgent1.importWorkflow")})]})]})]}),e.jsx("div",{className:n.scroll_bar,children:e.jsx("div",{className:n.wrapper_container,children:e.jsx("div",{className:n.wrapper_container_agentType,children:e.jsxs("div",{className:n.wrapper_agentType_content,children:[e.jsxs("div",{onClick:()=>y(!1),className:`${n.wrapper_agentType_Type} ${n.wrapper_agentType_Type_only_hover}`,children:[e.jsx("div",{className:n.iconBox,style:{width:"48px",height:"48px",backgroundColor:"#6356EA",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"21px"},children:e.jsx(P,{style:{fontSize:"20px",color:"white"}})}),e.jsx("div",{className:n.iconTitle,style:{fontSize:"16px",fontWeight:"normal",lineHeight:"24px",color:"#000000"},children:r("createAgent1.customCreation")})]}),H.map((t,s)=>{var g;return e.jsxs("div",{className:n.agentType_Type_content,ref:_=>j.current[s]=_,onMouseLeave:()=>{u(-1)},onMouseEnter:()=>{u(s)},children:[((t==null?void 0:t.tag)===0||(t==null?void 0:t.tag)===1)&&e.jsx("img",{src:(t==null?void 0:t.tag)===0?w0:L0,className:n.agentType_Type_content_tag}),e.jsxs("div",{ref:_=>W.current[s]=_,className:n.wrapper_agentType_Type,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:n.agent_img,children:e.jsx("img",{src:t!=null&&t.cover_url?t.cover_url:u0,alt:""})}),e.jsxs("div",{className:n.agent_bottom,children:[e.jsx("div",{className:n.agent_center_title,children:e.jsx("div",{className:n.agent_center_title_left,children:e.jsx("p",{title:t.title,className:n.title_left_text1,children:t.title})})}),d==s&&e.jsx("button",{onClick:()=>y(!0,t),className:n.my_btn,children:e.jsx("span",{children:r("createAgent1.buildSame")})}),d!==s&&e.jsx("div",{className:n.ell,style:{fontSize:"14px",fontWeight:"normal",color:"#7f7f7f",lineHeight:"18px",paddingTop:"2px",width:"100%"},children:t.core_abilities.description})]})]})]},t.mass_id+((g=t._id)==null?void 0:g.timestamp))})]})})})})]})})})]})};export{X0 as M};
