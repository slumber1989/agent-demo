import{d as k,c as v,a as g,r as s,l as y,j as t,O as j}from"./index-ChJwsExv.js";import{E,C as N,i as _}from"./index-C0XfTN8g.js";import{S as B}from"./SpaceButton-Rreq134p.js";import{i as P}from"./index-BVZ57ZqM.js";import{a as S}from"./arrow-down-white-JDA--J6P.js";import"./index-YGkSEyjC.js";import"./useChat-CWQzZkr8.js";import"./avator-DKZCG6Rw.js";import"./agentLogoText-6iegdQw0.js";import"./index-C6si9kmF.js";import"./index-C8P53uUi.js";import"./modal-close-QVlieQPY.js";import"./icon_zhishi_upload_act-D7BMkVq5.js";import"./index-DOFwIa6F.js";import"./globalStore-__M3ATz8.js";import"./common-Cw0C9a7_.js";import"./plugin-DqOd_d6v.js";import"./uuid-Q0OBPXtL.js";import"./index-sQMLBTCe.js";import"./icon_nav_dropdown-B-gtXUyP.js";import"./ai_chat_placeholder-ChZYJ5lQ.js";import"./flowId-copy-icon-oUh8DYIQ.js";import"./agentLogoTextEn-186gKWIW.js";import"./enterprise-auth-api-CSBKVsBN.js";import"./index-CeDfaOSw.js";import"./index-Dd7kKHqh.js";import"./useImageCropUpload-CM0udQSZ.js";import"./person-space-icon-BkLkzb60.js";import"./DeleteOutlined-wnSCu94E.js";import"./useSpaceI18n-b-imgmM5.js";import"./icon_zhishi_search-VMy98n1a.js";const H="_headerTitle_1pddq_2",L="_headerTab_1pddq_13",K="_headerTabActive_1pddq_29",q="_toolsContainer_1pddq_35",A="_searchContainer_1pddq_41",p={headerTitle:H,headerTab:L,headerTabActive:K,toolsContainer:q,searchContainer:A},x=[{key:"plugin",path:"/resource/plugin",iconClass:"plugin-icon",title:"common.header.plugin",searchPlaceholder:"common.inputPlaceholder",createButtonText:"plugin.createPlugin",createButtonKey:"create-plugin"},{key:"knowledge",path:"/resource/knowledge",iconClass:"knowledge-icon",title:"common.header.knowledge",searchPlaceholder:"common.inputPlaceholder",createButtonText:"knowledge.createNewKnowledge",createButtonKey:"create-knowledge"},{key:"database",path:"/resource/database",iconClass:"database-icon",title:"common.header.database",searchPlaceholder:"common.inputPlaceholder",createButtonText:"database.createDatabase",createButtonKey:"create-database"},{key:"rpa",path:"/resource/rpa",iconClass:"rpa-icon",title:"common.header.rpa",searchPlaceholder:"common.inputPlaceholder",createButtonText:"rpa.createRpa",createButtonKey:"create-rpa"}];function R({onSearch:r,onCreate:d}){const{t:c}=k(),u=v(),i=g(),[a,n]=s.useState(""),[l,m]=s.useState("");s.useEffect(()=>{var e,o;n((o=(e=i==null?void 0:i.pathname)==null?void 0:e.split("/"))==null?void 0:o.pop())},[i]);const h=s.useMemo(()=>x.find(e=>e.key===a),[a]),f=s.useRef(y.debounce((e,o,w)=>{w==null||w(e,o)},500)).current,b=s.useCallback(e=>{const o=e.target.value;m(o),f(o,a,r)},[a,r,f]),C=e=>{d==null||d(e)},T=e=>{var o;e!==a&&(u((o=x.find(w=>w.key===e))==null?void 0:o.path),n(e),m(""))};return t.jsxs("div",{className:"mx-auto max-w-[1425px]",style:{width:"86%"},children:[t.jsx("div",{className:p.headerTitle,children:c("sidebar.resourceManagement")}),t.jsxs("div",{className:"flex items-center justify-between relative",children:[t.jsx("div",{className:"flex items-center",children:x.map((e,o)=>t.jsx("div",{onClick:()=>{T(e==null?void 0:e.key)},className:`${p.headerTab} ${a===(e==null?void 0:e.key)?p.headerTabActive:""}`,children:t.jsx("span",{children:c(e==null?void 0:e.title)})},o))}),t.jsxs("div",{className:p.toolsContainer,children:[h&&t.jsx("div",{className:p.searchContainer,children:t.jsx(P,{className:"retractable-input-UI",restrictFirstChar:!0,onChange:b,placeholder:c(h.searchPlaceholder),value:l})}),h&&t.jsx(B,{config:{key:h.createButtonKey,text:c(h.createButtonText),type:"primary",size:"small",icon:t.jsx("img",{src:S,alt:"arrow-down",style:{width:14,height:14}}),onClick:()=>C(a)},className:p.createButton})]})]})]})}const $=["knowledge","plugin","database","rpa"],D=["/store/plugin","/management/","/starry/"];function fe(){const r=g();v();const c=s.useMemo(()=>{var m;const a=(m=r==null?void 0:r.pathname)==null?void 0:m.split("/"),n=a==null?void 0:a.pop();return D.some(h=>r.pathname.startsWith(h))?!1:$.includes(n)},[r.pathname]),u=s.useCallback((a,n)=>{const l=new CustomEvent("headerSearch",{detail:{value:a,type:n}});window.dispatchEvent(l)},[]),i=s.useCallback(a=>{if(!["plugin","knowledge","database","rpa"].includes(a))return;const n=new CustomEvent("headerCreate",{detail:{type:a}});window.dispatchEvent(n)},[]);return t.jsx(E,{onReset:()=>{window.location.href="/home"},FallbackComponent:N,children:t.jsxs("div",{className:"flex h-full w-full overflow-hidden global-background",children:[t.jsx(_,{}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden page-container-UI",children:[c&&t.jsx(R,{onSearch:u,onCreate:i}),t.jsx(j,{})]})]})})}const ve=(r,{onSearch:d,onCreate:c})=>{s.useEffect(()=>{if(!["plugin","knowledge","database","rpa"].includes(r))return;const u=a=>{const{value:n,type:l}=a.detail;l===r&&d(n,l)},i=a=>{const{type:n}=a.detail;n===r&&c(n)};return window.addEventListener("headerSearch",u),window.addEventListener("headerCreate",i),()=>{window.removeEventListener("headerSearch",u),window.removeEventListener("headerCreate",i)}},[r,d,c])};export{fe as default,ve as useHeaderOperations};
